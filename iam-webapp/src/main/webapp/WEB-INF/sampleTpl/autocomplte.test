<form id="defForm" action="#">
	<input  id="rechEnseigne" name="rechEnseigne" type="text" style="vertical-align: top; width: 185px;" /> 
</form>
<script type="text/javascript">
$(document).ready(function() {

    $('#rechEnseigne').autocomplete({
        source: function(request, response) {
            $.getJSON('<c:url value="/json/enseignes.do" />', { qry: request.term }
            	, function(result) {
	                response($.map(result, function(item) {	// population des éléments "$.ui" standardisés
                        return {
                        	label: item.libelle,	// libelle a presenter dans la combo
                        	value: item.id,			// PK de l'élément
                        	id:item					// objet complet de l'élément
                        }
	                }));
           	 	}
            	);
        },
         select: function(event, ui) {	// action sur sélection
       	    idItem = ui.item.value;
       	    libItem = ui.item.label;
         
    		$("#id").attr("value", idItem);
    		$("#libelle").attr("value",libItem);
    		$("#code").attr("value",ui.item.id.code);
    		$("#spanLibEnseigne").html(libItem);
         	
    		$("#enseigneForm").attr("action", "save.do");
        	
         	return false;
       	 },
        focus: function( event, ui ) {	// gère le retour dans l'input de saisie pour éviter l'ID
			$( "#rechEnseigne" ).val( ui.item.label );
			return false;  
	     }, 
        minLength:2, // nombre de caratères avant appel de service distant
        open: function() {	// generation de la pseudo liste d'autocomplete
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() { //fermeture de la pseudo liste d'autocomplete
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    });
	
	
});

  </script>